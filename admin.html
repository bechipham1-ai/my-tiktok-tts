<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√®o Admin üå∏</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap');
        body { font-family: 'Quicksand', sans-serif; background: #fff5f7; color: #5d4037; padding: 20px; margin: 0; }
        .admin-panel { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 25px; border: 2px solid #f8bbd0; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        h2 { color: #ff85a2; text-align: center; }
        .tabs { display: flex; gap: 5px; background: #fff0f3; padding: 5px; border-radius: 15px; margin-bottom: 15px; }
        .tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; border-radius: 10px; font-weight: bold; font-size: 12px; }
        .tab.active { background: #ff85a2; color: white; }
        .add-box { display: flex; gap: 10px; margin-bottom: 15px; }
        input { flex: 1; padding: 12px; border: 2px solid #f8bbd0; border-radius: 12px; outline: none; }
        .btn { background: #ff85a2; color: white; border: none; padding: 10px 20px; border-radius: 12px; font-weight: bold; cursor: pointer; }
        .list { height: 350px; overflow-y: auto; border: 1px solid #eee; border-radius: 15px; padding: 10px; }
        .item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; font-size: 14px; }
        .del { color: #ff5252; cursor: pointer; font-weight: bold; }
        .back { display: block; text-align: center; margin-top: 15px; color: #ff85a2; text-decoration: none; font-size: 13px; }
    </style>
</head>
<body>
    <div class="admin-panel">
        <h2>C√ÄI ƒê·∫∂T B√àO ‚öôÔ∏è</h2>
        <div class="tabs">
            <div class="tab active" id="btn-ban" onclick="switchTab('ban')">C·∫§M</div>
            <div class="tab" id="btn-acr" onclick="switchTab('acr')">T·∫ÆT</div>
            <div class="tab" id="btn-emo" onclick="switchTab('emo')">ICON</div>
            <div class="tab" id="btn-bot" onclick="switchTab('bot')">BOT</div>
        </div>
        <div class="add-box">
            <input type="text" id="inp-1" placeholder="T·ª´ kh√≥a...">
            <input type="text" id="inp-2" placeholder="Thay th·∫ø..." style="display:none;">
            <button class="btn" onclick="handleAdd()">L∆ØU</button>
        </div>
        <div class="list" id="display"></div>
        <a href="/" class="back">‚¨Ö V·ªÄ TRANG LIVE</a>
    </div>
    <script>
        let curTab = 'ban';
        function switchTab(t) {
            curTab = t;
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            document.getElementById(`btn-${t}`).classList.add('active');
            document.getElementById('inp-2').style.display = (t === 'ban') ? 'none' : 'block';
            load();
        }
        async function load() {
            const p = curTab==='ban'?'words':curTab==='acr'?'acronyms':curTab==='emo'?'emojis':'bot';
            const res = await (await fetch(`/api/${p}`)).json();
            document.getElementById('display').innerHTML = res.map(item => {
                let txt = curTab==='ban' ? item : (item.key || item.icon || item.keyword) + ' ‚ûú ' + (item.value || item.text || item.response);
                let id = item._id || item;
                return `<div class="item"><span>${txt}</span><span class="del" onclick="del('${p}', '${id}')">X√≥a</span></div>`;
            }).join('');
        }
        async function handleAdd() {
            const p = curTab==='ban'?'words':curTab==='acr'?'acronyms':curTab==='emo'?'emojis':'bot';
            const v1 = document.getElementById('inp-1').value, v2 = document.getElementById('inp-2').value;
            const body = curTab==='ban'?{word:v1}:curTab==='acr'?{key:v1,value:v2}:curTab==='emo'?{icon:v1,text:v2}:{keyword:v1,response:v2};
            await fetch(`/api/${p}`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(body) });
            load();
        }
        async function del(p, id) {
            await fetch(`/api/${p}/${encodeURIComponent(id)}`, { method: 'DELETE' });
            load();
        }
        load();
    </script>
</body>
</html>
